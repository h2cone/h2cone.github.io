<!DOCTYPE html>
<html><head lang="en">
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge"><title>Java 8 åˆ° Java 17 çš„ç‰¹æ€§ - Huangh&#39;s blog</title><meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="è€å½“ç›Šå£®ã€‚" />
	<meta property="og:image" content=""/>
	<meta property="og:url" content="https://h2cone.github.io/2022/05/30/java8-java17/">
  <meta property="og:site_name" content="Huangh&#39;s blog">
  <meta property="og:title" content="Java 8 åˆ° Java 17 çš„ç‰¹æ€§">
  <meta property="og:description" content="è€å½“ç›Šå£®ã€‚">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
  <meta property="article:section" content="post">
    <meta property="article:published_time" content="2022-05-30T10:37:32+08:00">
    <meta property="article:modified_time" content="2022-05-30T10:37:32+08:00">
    <meta property="article:tag" content="Java">
<meta name="twitter:card" content="summary"><meta name="twitter:title" content="Java 8 åˆ° Java 17 çš„ç‰¹æ€§">
<meta name="twitter:description" content="è€å½“ç›Šå£®ã€‚">
<script src="https://h2cone.github.io/js/feather.min.js"></script>
	
	
        <link href="https://h2cone.github.io/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css" rel="stylesheet">
	

	
	<link rel="stylesheet" type="text/css" media="screen" href="https://h2cone.github.io/css/main.ac08a4c9714baa859217f92f051deb58df2938ec352b506df655005dcaf98cc0.css" />
		<link id="darkModeStyle" rel="stylesheet" type="text/css" href="https://h2cone.github.io/css/dark.726cd11ca6eb7c4f7d48eb420354f814e5c1b94281aaf8fd0511c1319f7f78a4.css"  disabled />
	

	
	
		<script type="text/javascript"
		src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
		</script>
	
		
		<script type="text/x-mathjax-config">
		MathJax.Hub.Config({
			tex2jax: {
				inlineMath: [['$','$'], ['\\(','\\)']],
				displayMath: [['$$','$$'], ['\[','\]']],
				processEscapes: true,
				processEnvironments: true,
				skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
				TeX: { equationNumbers: { autoNumber: "AMS" },
						 extensions: ["AMSmath.js", "AMSsymbols.js"] }
			}
		});
		</script>
	

	
	
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.css">
		<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/katex.min.js"></script>
		<script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.2/dist/contrib/auto-render.min.js" onload="renderMathInElement(document.body);"></script>
		
		
		<script>
			document.addEventListener("DOMContentLoaded", function() {
					renderMathInElement(document.body, {
							delimiters: [
									{left: "$$", right: "$$", display: true},
									{left: "$", right: "$", display: false}
							]
					});
			});
			</script>
	
	
	

	<link href="/pagefind/pagefind-ui.css" rel="stylesheet">
<script src="/pagefind/pagefind-ui.js"></script>

<script>
    window.addEventListener('DOMContentLoaded', (event) => {
        new PagefindUI({ element: "#search", showSubResults: true });
    });
</script>
</head>
<body>
        <div class="content"><header>
	<div class="main">
		<a href="https://h2cone.github.io/">Huangh&#39;s blog</a>
	</div>
	<nav>
		
		<a href="/">Home</a>
		
		<a href="/post">Posts</a>
		
		<a href="/tags">Tags</a>
		
		| <span id="dark-mode-toggle" onclick="toggleTheme()"></span>
		<script src="https://h2cone.github.io/js/themetoggle.js"></script>
		
	</nav>
</header>

<div id="search"></div>
<main>
	<article>
		<div class="title">
			<h1 class="title">Java 8 åˆ° Java 17 çš„ç‰¹æ€§</h1>
			<div class="meta">Posted on May 30, 2022</div>
		</div>
		

		<section class="body">
			<h2 id="ä¸ªäººé€‰æ‹©">ä¸ªäººé€‰æ‹©</h2>
<p>å…¬å¸ä¸­çš„é—ç•™é¡¹ç›®åŸºäº Java 8ï¼Œä¹Ÿæœ‰éƒ¨ç½²ä½¿ç”¨ Java 11 çš„å¼€æºè½¯ä»¶ï¼›å¯¹äº Side Projectï¼Œç”šè‡³æ˜¯æ–°é¡¹ç›®ï¼Œå¯ä»¥æ¯«ä¸çŠ¹è±«ä½¿ç”¨ Java 11/17ã€‚ä¸ªäººå«Œåœ¨ Oracle å®˜æ–¹ä¸‹è½½ JDK è¿‡äºéº»çƒ¦ï¼Œä¹Ÿé 100% å¼€æºï¼ŒåŠ ä¸Šæœ¬åœ°æ“ä½œç³»ç»ŸæŒ‡ä»¤é›†æ¶æ„ä» x86 è½¬åˆ°äº† ARMï¼Œå› æ­¤å†³å®š<a href="https://www.azul.com/downloads/?package=jdk#download-openjdk">ä¸‹è½½ Azul Zulu Builds of OpenJDK</a>ã€‚</p>
<p>å¸‚é¢ä¸Šå„å®¶å‚å•†æ„å»ºçš„ JDK ä¸å¯èƒ½æ¯«æ— å·®å¼‚ï¼Œæ¯”å¦‚ <a href="https://www.azul.com/products/core/jdk-comparison-matrix/">OpenJDK ä¸ Oracle JDK â€“ æ¯”è¾ƒè¡¨</a>ã€‚</p>
<h2 id="å‘åå…¼å®¹">å‘åå…¼å®¹</h2>
<p><img src="/img/java/javaversions-5.png" alt="javaversions-5"></p>
<p>Java 8 æœ‰æ—¶è¢«ç§°ä¸º Java 1.8ï¼Œåœ¨è¿™ä¹‹åçš„ç‰ˆæœ¬å·ä¸å†ä»¥ 1. å¼€å¤´ï¼Œéšç€å‘å¸ƒæ—¶é—´çš„å¢åŠ è€Œå¢åŠ ï¼Œä¸Šå›¾ä¸­åªæœ‰ 8ã€11ã€17 æ˜¯ <a href="https://en.wikipedia.org/wiki/Long-term_support">LTS</a> ç‰ˆæœ¬ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>% java -version
</span></span><span style="display:flex;"><span>openjdk version <span style="color:#e6db74">&#34;17.0.3&#34;</span> 2022-04-19 LTS
</span></span><span style="display:flex;"><span>OpenJDK Runtime Environment Zulu17.34+19-CA <span style="color:#f92672">(</span>build 17.0.3+7-LTS<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>OpenJDK 64-Bit Server VM Zulu17.34+19-CA <span style="color:#f92672">(</span>build 17.0.3+7-LTS, mixed mode, sharing<span style="color:#f92672">)</span>
</span></span></code></pre></div><p>Java ç‰ˆæœ¬ä¹‹é—´ç ´åæ€§å˜æ›´è¾ƒå°ï¼ŒJVM é«˜åº¦<strong>å‘åå…¼å®¹</strong>ï¼Œæ–°ç‰ˆé€šå¸¸å…¼å®¹æ—§ç‰ˆï¼Œä¾‹å¦‚åŸºäº Java 5 æˆ– Java 8 çš„ç¨‹åºï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œä¸æ›´æ”¹ä»£ç ä¹Ÿå¯ä»¥åœ¨ Java 8 åˆ° Java 17 çš„ JVM ä¸Šè¿è¡Œæ­£å¸¸ï¼›åè¿‡æ¥è¯´ï¼Œä¸èƒ½å‘å‰å…¼å®¹ï¼Œä¾‹å¦‚ä½¿ç”¨ Java 17 ç¼–è¯‘è¾“å‡ºçš„ Class æˆ– Jar æ–‡ä»¶æ— æ³•åœ¨ 17 ä¹‹å‰çš„ JVM ä¸ŠåŠ è½½é€šè¿‡ï¼š<code>UnsupportedClassVersionError</code>ã€‚</p>
<h2 id="ç‰¹æ€§æ¦‚è§ˆ">ç‰¹æ€§æ¦‚è§ˆ</h2>
<p>ä¸‹æ–‡åªåˆ—å‡ºæ„Ÿå…´è¶£çš„ç‰¹æ€§ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåä¸€ç‰ˆå¹¶ä¸ä¼šç§»é™¤ä¸Šä¸€ç‰ˆçš„ç‰¹æ€§ã€‚</p>
<h3 id="java-8">Java 8</h3>
<blockquote>
<p>è¦ä¹ˆå¯¹æ•°æ®è¿›è¡ŒæŠ½è±¡ï¼Œè¦ä¹ˆå¯¹è¡Œä¸ºè¿›è¡ŒæŠ½è±¡ã€‚</p>
</blockquote>
<h4 id="lambda-expressions">Lambda expressions</h4>
<p>å°½ç®¡ Java ä¸æ˜¯å‡½æ•°å¼è¯­è¨€ï¼Œä½†æ˜¯ <a href="https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html">Lambda è¡¨è¾¾å¼</a>å…è®¸æˆ‘ä»¬<strong>å°†åŠŸèƒ½è§†ä¸ºæ–¹æ³•å‚æ•°</strong>ï¼Œæˆ–<strong>å°†ä»£ç è§†ä¸ºæ•°æ®</strong>ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// before java 8</span>
</span></span><span style="display:flex;"><span>Runnable r1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Runnable() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">run</span>() {
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;hello world&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// --snip--</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span><span style="color:#75715e">// after java 8</span>
</span></span><span style="display:flex;"><span>Runnable r2 <span style="color:#f92672">=</span> () <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>    System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;hello world&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// --snip--</span>
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>File dir <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> File(<span style="color:#e6db74">&#34;/path/to/dir&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#75715e">// anonymous class</span>
</span></span><span style="display:flex;"><span>File<span style="color:#f92672">[]</span> files1 <span style="color:#f92672">=</span> dir.<span style="color:#a6e22e">listFiles</span>(<span style="color:#66d9ef">new</span> FileFilter() {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">boolean</span> <span style="color:#a6e22e">accept</span>(File pathname) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">return</span> pathname.<span style="color:#a6e22e">getName</span>().<span style="color:#a6e22e">endsWith</span>(<span style="color:#e6db74">&#34;.java&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span><span style="color:#75715e">// lambda</span>
</span></span><span style="display:flex;"><span>File<span style="color:#f92672">[]</span> files2 <span style="color:#f92672">=</span> dir.<span style="color:#a6e22e">listFiles</span>(pathname <span style="color:#f92672">-&gt;</span> pathname.<span style="color:#a6e22e">getName</span>().<span style="color:#a6e22e">endsWith</span>(<span style="color:#e6db74">&#34;.java&#34;</span>));
</span></span></code></pre></div><p>å¦‚æœ<a href="https://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html">åŒ¿åç±»</a>æ˜¯â€œæ—§é…’â€ï¼Œé‚£ä¹ˆ Lambda è¡¨è¾¾å¼æ˜¯â€œæ–°ç“¶â€ï¼Œå®ƒæ›´ç´§å‡‘åœ°è¡¨è¾¾äº†â€œå•ä¸€æŠ½è±¡æ–¹æ³•æ¥å£â€ï¼ˆè¢«ç§°ä¸º <strong>Functional Interface</strong>ï¼‰çš„å®ä¾‹ï¼ŒFunctional Interface çš„æŠ½è±¡æ–¹æ³•ç­¾åå†³å®šäº†å‡½æ•°çš„å‚æ•°ç±»å‹åˆ—è¡¨å’Œè¿”å›å€¼ç±»å‹ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#a6e22e">@FunctionalInterface</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Function</span><span style="color:#f92672">&lt;</span>T, R<span style="color:#f92672">&gt;</span> {
</span></span><span style="display:flex;"><span>    R <span style="color:#a6e22e">apply</span>(T t);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// --snip--</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Java æä¾›äº†è®¸å¤š Functional Interface å……å½“ lambda è¡¨è¾¾å¼çš„æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚ï¼š<a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/Consumer.html">Consumer</a>ã€<a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/Predicate.html">Predicate</a>ã€<a href="https://docs.oracle.com/javase/8/docs/api/java/util/function/Supplier.html">Supplier</a>ã€‚</p>
<h5 id="final-or-effectively-final">final or effectively final</h5>
<p>Lambda è¡¨è¾¾å¼æˆ–åŒ¿åç±»åœ¨<strong>å°é—­èŒƒå›´</strong>è®¿é—®çš„<strong>å¤–å›´æœ¬åœ°å˜é‡</strong>å¿…é¡»æ˜¯ <strong>final</strong> æˆ– <strong>effectively final</strong> å˜é‡ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> n <span style="color:#f92672">=</span> 0;
</span></span><span style="display:flex;"><span>Arrays.<span style="color:#a6e22e">asList</span>(0, 1, 2, 3, 4, 5, 6, 7, 8, 9).<span style="color:#a6e22e">forEach</span>(item <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (item <span style="color:#f92672">%</span> 2 <span style="color:#f92672">==</span> 0) {
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">// This code does not compile!</span>
</span></span><span style="display:flex;"><span>        n<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><p>æ³¨æ„ï¼Œä¸Šé¢å’Œä¸‹é¢çš„ä»£ç ç¼–è¯‘éƒ½ä¸ä¼šé€šè¿‡ï¼šVariable used in lambda expression should be final or effectively final.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Supplier<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">incrementer</span>(<span style="color:#66d9ef">int</span> start) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// This code does not compile!</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> () <span style="color:#f92672">-&gt;</span> start<span style="color:#f92672">++</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>åœ¨åŒ¿åç±»æ–¹æ³•ä½“å†…è®¿é—®å¤–å›´æœ¬åœ°å˜é‡æ—¶ï¼ŒåŒæ ·è¦æ±‚æˆ‘ä»¬å°†å®ƒä»¬å£°æ˜ä¸º final æˆ–è€…ä¸æ›´æ”¹å®ƒä»¬çš„å€¼ï¼Œåè€…å¯¹äºç¼–è¯‘å™¨æ¥è¯´æœ€ç»ˆè¿˜æ˜¯ finalã€‚</p>
<blockquote>
<p>An anonymous class cannot access local variables in its enclosing scope that are not declared as final or effectively final.</p>
</blockquote>
<p>JLS å½“ä¸­çš„ <a href="https://docs.oracle.com/javase/specs/jls/se10/html/jls-15.html#jls-15.27.2">Â§15.27.2</a> æåˆ°äº†åŸå› ï¼š</p>
<blockquote>
<p>The restriction to effectively final variables prohibits access to dynamically-changing local variables, whose capture would likely introduce concurrency problems.</p>
</blockquote>
<p>ç®€è€Œè¨€ä¹‹ï¼Œè¯¥é™åˆ¶å¯ä»¥è§„é¿ä¸€äº›å¹¶å‘é£é™©ï¼Œä¸è¿‡è®¿é—®æ”¾ç½®åœ¨ Java å †çš„å®ä¾‹å­—æ®µã€é™æ€å­—æ®µå¹¶ä¸å—æ­¤é™åˆ¶ã€‚</p>
<h4 id="method-references">Method references</h4>
<p><a href="https://docs.oracle.com/javase/tutorial/java/javaOO/methodreferences.html">æ–¹æ³•å¼•ç”¨</a>ä¸ºå·²æœ‰åç§°çš„æ–¹æ³•æä¾›æ˜“äºé˜…è¯»çš„ Lambda è¡¨è¾¾å¼ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Stream.<span style="color:#a6e22e">of</span>(<span style="color:#e6db74">&#34;a&#34;</span>, <span style="color:#e6db74">&#34;b&#34;</span>, <span style="color:#e6db74">&#34;c&#34;</span>).<span style="color:#a6e22e">map</span>(item <span style="color:#f92672">-&gt;</span> item.<span style="color:#a6e22e">toUpperCase</span>()).<span style="color:#a6e22e">forEach</span>(item <span style="color:#f92672">-&gt;</span> System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(item));
</span></span><span style="display:flex;"><span><span style="color:#75715e">// can be replaced with a method reference</span>
</span></span><span style="display:flex;"><span>Stream.<span style="color:#a6e22e">of</span>(<span style="color:#e6db74">&#34;a&#34;</span>, <span style="color:#e6db74">&#34;b&#34;</span>, <span style="color:#e6db74">&#34;c&#34;</span>).<span style="color:#a6e22e">map</span>(String::toUpperCase).<span style="color:#a6e22e">forEach</span>(System.<span style="color:#a6e22e">out</span>::println);
</span></span></code></pre></div><p>æ ¹æ®<a href="https://www.oreilly.com/library/view/effective-java/9780134686097/">ã€ŠEffective Javaã€‹</a>ä¸­çš„è¯´æ³•ï¼Œæœ‰ 5 ç§ç±»å‹çš„ç”¨ä¾‹å¯ä¾›å‚è€ƒã€‚</p>
<p><img src="/img/java/method_ref_type.png" alt="method_ref_type"></p>
<h4 id="streams">Streams</h4>
<p>æ–°çš„ <a href="https://docs.oracle.com/javase/8/docs/api/java/util/stream/package-summary.html">java.util.stream</a> åŒ…æä¾›äº† Stream API æ¥æ”¯æŒå¯¹å…ƒç´ æµï¼ˆstreams of elementsï¼‰çš„å‡½æ•°å¼æ“ä½œã€é“¾å¼æ“ä½œã€<strong>èšåˆæ“ä½œ</strong>ã€‚ä¸€ä¸ª Stream æ˜¯ä¸€ä¸ªå…ƒç´ åºåˆ—ï¼Œä¸åŒäº Collectionï¼Œå®ƒä¸æ˜¯å­˜å‚¨å…ƒç´ çš„æ•°æ®ç»“æ„ï¼Œç›¸åï¼Œ<strong>Stream é€šè¿‡ç®¡é“æºå¸¦æ¥è‡ª Source çš„å€¼</strong>ã€‚ä¸€ä¸ª Source å¯ä»¥æ˜¯ä¸€ä¸ª Collectionã€ä¸€ä¸ªæ•°ç»„ã€ä¸€ä¸ªç”Ÿæˆå™¨å‡½æ•°ã€ä¸€ä¸ª I/O Channel ç­‰ç­‰ã€‚</p>
<p>Oracle çš„ Java æŒ‡å—æŠŠ <a href="https://docs.oracle.com/javase/tutorial/collections/streams/">Streams</a> å®‰æ’åˆ° <a href="https://docs.oracle.com/javase/tutorial/collections/">Collections</a> ä¹‹ä¸‹ï¼Œé€šå¸¸å°†ä¸¤è€…çš„ API ç»“åˆèµ·æ¥ä½¿ç”¨ï¼Œå‡è®¾æœ‰ä¸€ä¸ªåä¸º roster ä¸”ç±»å‹æ˜¯ Collection çš„å˜é‡ï¼Œè¦æ±‚æ‰“å°ç”·æ€§å§“åï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// before java 8</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (Person p : roster) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">if</span> (p.<span style="color:#a6e22e">getGender</span>() <span style="color:#f92672">==</span> Person.<span style="color:#a6e22e">Sex</span>.<span style="color:#a6e22e">MALE</span>) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(p.<span style="color:#a6e22e">getName</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">// after java 8</span>
</span></span><span style="display:flex;"><span>roster
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">stream</span>()
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">filter</span>(e <span style="color:#f92672">-&gt;</span> e.<span style="color:#a6e22e">getGender</span>() <span style="color:#f92672">==</span> Person.<span style="color:#a6e22e">Sex</span>.<span style="color:#a6e22e">MALE</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#a6e22e">forEach</span>(e <span style="color:#f92672">-&gt;</span> System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(e.<span style="color:#a6e22e">getName</span>()));
</span></span></code></pre></div><p>ä¸€ç³»åˆ—èšåˆæ“ä½œå¦‚åŒ Unix çš„<a href="https://en.wikipedia.org/wiki/Pipeline_(Unix)">ç®¡é“</a>éšè—äº†å†…éƒ¨ç»“æ„ï¼Œä½¿è¿‡ç¨‹æ›´æ¸…æ™°å’Œç®€å•ã€‚</p>
<p><img src="/img/java/filter-sorted-map-collect.webp" alt="filter-sorted-map-collect"></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>List<span style="color:#f92672">&lt;</span>Integer<span style="color:#f92672">&gt;</span> transactionsIds <span style="color:#f92672">=</span> 
</span></span><span style="display:flex;"><span>    transactions.<span style="color:#a6e22e">stream</span>()
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">filter</span>(t <span style="color:#f92672">-&gt;</span> t.<span style="color:#a6e22e">getType</span>() <span style="color:#f92672">==</span> Transaction.<span style="color:#a6e22e">GROCERY</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">sorted</span>(comparing(Transaction::getValue).<span style="color:#a6e22e">reversed</span>())
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">map</span>(Transaction::getId)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">collect</span>(toList());
</span></span></code></pre></div><p>è¿™ä¹ˆå¥½çš„ä¾‹å­æ¥è‡ª <a href="https://www.oracle.com/technical-resources/articles/java/ma14-java-se-8-streams.html">Processing Data with Java SE 8 Streams, Part 1</a> å’Œ <a href="https://www.oracle.com/technical-resources/articles/java/architect-streams-pt2.html">Part 2: Processing Data with Java SE 8 Streams</a>ã€‚</p>
<h4 id="default-method">Default method</h4>
<p>å‘æŸä¸€æ¥å£æ–°å¢æ–¹æ³•ï¼Œè¯¥æ¥å£çš„æ‰€æœ‰å®ç°ç±»å‡è¦æ›´æ”¹ï¼Œ<a href="https://docs.oracle.com/javase/tutorial/java/IandI/defaultmethods.html">é»˜è®¤æ–¹æ³•</a>å…è®¸æ¥å£æä¾›é»˜è®¤å…·ä½“å®ç°å’Œå…¼å®¹æ—§ç‰ˆæœ¬å®ç°ç±»ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">One</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">default</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method</span>() {
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;One&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">Two</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">default</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method</span> () {
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;One&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Three</span> <span style="color:#66d9ef">implements</span> One, Two {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">method</span>() {
</span></span><span style="display:flex;"><span>        One.<span style="color:#a6e22e">super</span>.<span style="color:#a6e22e">method</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>å®ç°ç±»éå¿…é¡»é‡å†™ï¼ˆoverrideï¼‰é»˜è®¤æ–¹æ³•ï¼Œå‡å¦‚éœ€è¦åœ¨é‡å†™çš„æ–¹æ³•å†…å¼•ç”¨é»˜è®¤æ–¹æ³•ï¼Œåº”è¯¥ä½¿ç”¨ interface åç§°ä¸å…³é”®è¯ <code>super</code>ã€‚</p>
<h3 id="java-9">Java 9</h3>
<h4 id="collections-çš„ä¾¿åˆ©å·¥å‚æ–¹æ³•">Collections çš„ä¾¿åˆ©å·¥å‚æ–¹æ³•</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// before java 9</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// mutable</span>
</span></span><span style="display:flex;"><span>    List<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> list1 <span style="color:#f92672">=</span> Arrays.<span style="color:#a6e22e">asList</span>(<span style="color:#e6db74">&#34;one&#34;</span>, <span style="color:#e6db74">&#34;two&#34;</span>, <span style="color:#e6db74">&#34;three&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// since java 9</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// immutable</span>
</span></span><span style="display:flex;"><span>    List<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> list2 <span style="color:#f92672">=</span> List.<span style="color:#a6e22e">of</span>(<span style="color:#e6db74">&#34;one&#34;</span>, <span style="color:#e6db74">&#34;two&#34;</span>, <span style="color:#e6db74">&#34;three&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// before java 9</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// mutable</span>
</span></span><span style="display:flex;"><span>    Set<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> set1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashSet<span style="color:#f92672">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>    set1.<span style="color:#a6e22e">add</span>(<span style="color:#e6db74">&#34;one&#34;</span>);
</span></span><span style="display:flex;"><span>    set1.<span style="color:#a6e22e">add</span>(<span style="color:#e6db74">&#34;two&#34;</span>);
</span></span><span style="display:flex;"><span>    set1.<span style="color:#a6e22e">add</span>(<span style="color:#e6db74">&#34;three&#34;</span>);
</span></span><span style="display:flex;"><span>    Set<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> set2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashSet<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span>() {
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            add(<span style="color:#e6db74">&#34;one&#34;</span>);
</span></span><span style="display:flex;"><span>            add(<span style="color:#e6db74">&#34;two&#34;</span>);
</span></span><span style="display:flex;"><span>            add(<span style="color:#e6db74">&#34;three&#34;</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// since java 9</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// immutable</span>
</span></span><span style="display:flex;"><span>    Set<span style="color:#f92672">&lt;</span>String<span style="color:#f92672">&gt;</span> set3 <span style="color:#f92672">=</span> Set.<span style="color:#a6e22e">of</span>(<span style="color:#e6db74">&#34;one&#34;</span>, <span style="color:#e6db74">&#34;two&#34;</span>, <span style="color:#e6db74">&#34;three&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// before java 9</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// mutable</span>
</span></span><span style="display:flex;"><span>    Map<span style="color:#f92672">&lt;</span>String, Integer<span style="color:#f92672">&gt;</span> map1 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashMap<span style="color:#f92672">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>    map1.<span style="color:#a6e22e">put</span>(<span style="color:#e6db74">&#34;foo&#34;</span>, 1);
</span></span><span style="display:flex;"><span>    map1.<span style="color:#a6e22e">put</span>(<span style="color:#e6db74">&#34;bar&#34;</span>, 2);
</span></span><span style="display:flex;"><span>    Map<span style="color:#f92672">&lt;</span>String, Integer<span style="color:#f92672">&gt;</span> map2 <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> HashMap<span style="color:#f92672">&lt;</span>String, Integer<span style="color:#f92672">&gt;</span>() {
</span></span><span style="display:flex;"><span>        {
</span></span><span style="display:flex;"><span>            put(<span style="color:#e6db74">&#34;foo&#34;</span>, 1);
</span></span><span style="display:flex;"><span>            put(<span style="color:#e6db74">&#34;bar&#34;</span>, 2);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// since java 9</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// immutable</span>
</span></span><span style="display:flex;"><span>    Map<span style="color:#f92672">&lt;</span>String, Integer<span style="color:#f92672">&gt;</span> map3 <span style="color:#f92672">=</span> Map.<span style="color:#a6e22e">of</span>(<span style="color:#e6db74">&#34;foo&#34;</span>, 1, <span style="color:#e6db74">&#34;bar&#34;</span>, 2);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="stream-ç”Ÿæˆå™¨">Stream ç”Ÿæˆå™¨</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> 0; i <span style="color:#f92672">&lt;</span> 10; <span style="color:#f92672">++</span>i) {
</span></span><span style="display:flex;"><span>    System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(i);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">// since java 9</span>
</span></span><span style="display:flex;"><span>Stream.<span style="color:#a6e22e">iterate</span>(0, i <span style="color:#f92672">-&gt;</span> i <span style="color:#f92672">&lt;</span> 10, i <span style="color:#f92672">-&gt;</span> i <span style="color:#f92672">+</span> 1)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">forEach</span>(System.<span style="color:#a6e22e">out</span>::println);
</span></span></code></pre></div><h4 id="stream-takewhiledropwhile">Stream takeWhile/dropWhile</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#75715e">// print: 0123443210</span>
</span></span><span style="display:flex;"><span>Stream.<span style="color:#a6e22e">of</span>(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">filter</span>(i <span style="color:#f92672">-&gt;</span> i <span style="color:#f92672">&lt;</span> 5)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">forEach</span>(System.<span style="color:#a6e22e">out</span>::print);
</span></span><span style="display:flex;"><span><span style="color:#75715e">// print: 01234</span>
</span></span><span style="display:flex;"><span>Stream.<span style="color:#a6e22e">of</span>(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">takeWhile</span>(i <span style="color:#f92672">-&gt;</span> i <span style="color:#f92672">&lt;</span> 5)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">forEach</span>(System.<span style="color:#a6e22e">out</span>::print);
</span></span><span style="display:flex;"><span><span style="color:#75715e">// print: 56789876543210</span>
</span></span><span style="display:flex;"><span>Stream.<span style="color:#a6e22e">of</span>(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 8, 7, 6, 5, 4, 3, 2, 1, 0)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">dropWhile</span>(i <span style="color:#f92672">-&gt;</span> i <span style="color:#f92672">&lt;</span> 5)
</span></span><span style="display:flex;"><span>        .<span style="color:#a6e22e">forEach</span>(System.<span style="color:#a6e22e">out</span>::print);
</span></span></code></pre></div><p>é‡åˆ°ç¬¬ä¸€ä¸ªä¸æ»¡è¶³æ¡ä»¶çš„å…ƒç´ æ—¶ï¼Œæ–¹æ³• filter å°†ç»§ç»­ï¼Œè€Œæ–¹æ³• takeWhile/dropWhile å°†é€€å‡ºã€‚</p>
<h4 id="jshell">JShell</h4>
<p><a href="https://docs.oracle.com/javase/9/tools/jshell.htm">JShell</a> æ˜¯ä¸€ç§ <a href="https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop">REPL</a>ï¼Œå³â€œè¯»-æ±‚å€¼-æ‰“å°â€å¾ªç¯ï¼Œå®ƒè¯»å–æ¥è‡ªç”¨æˆ·è¾“å…¥åˆ°ç»ˆç«¯çš„è¯­å¥æˆ–è¡¨è¾¾å¼ï¼Œè¿›è¡Œæ±‚å€¼ï¼Œå°†ç»“æœè¾“å‡ºåˆ°ç»ˆç«¯ã€‚</p>
<h3 id="java-10">Java 10</h3>
<h4 id="æœ¬åœ°å˜é‡ç±»å‹æ¨æ–­">æœ¬åœ°å˜é‡ç±»å‹æ¨æ–­</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Pre-Java 10</span>
</span></span><span style="display:flex;"><span>    Person person <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Person();
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// With Java 10</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> person <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> Person();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>å…³é”®è¯ <a href="https://openjdk.java.net/projects/amber/guides/lvti-faq">var</a> æ˜¯ variable çš„ç®€å†™ï¼Œç¼–è¯‘å™¨åœ¨<strong>ç¼–è¯‘æ—¶</strong>èƒ½å¤Ÿä»åˆå§‹åŒ–å™¨ï¼ˆinitializerï¼‰æ¨æ–­å‡ºå£°æ˜ä¸º var çš„æœ¬åœ°å˜é‡ï¼ˆlocal variableï¼‰çš„ç±»å‹ï¼Œå°½ç®¡å¦‚æ­¤ï¼ŒJava ä»ç„¶æ˜¯é™æ€ç±»å‹è¯­è¨€ã€‚</p>
<p>æ˜¾å¼å£°æ˜ç±»å‹çš„æœ¬åœ°å˜é‡æœªåˆå§‹åŒ–ä¸å¯ä½¿ç”¨ï¼Œä½¿ç”¨ var ä¿®é¥°çš„æœ¬åœ°å˜é‡åŒç†ï¼Œå‰è€…å…è®¸è¿Ÿä¸€ç‚¹åˆå§‹åŒ–æˆ–è€…å¹²è„†ä¸åˆå§‹åŒ–ä¹Ÿä¸ä½¿ç”¨å´èƒ½é€šè¿‡ç¼–è¯‘ï¼Œåè€…è¦æ±‚å£°æ˜åç«‹å³æä¾›å¯æ¨æ–­çš„åˆå§‹åŒ–å™¨ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç ç¼–è¯‘ä¸é€šè¿‡ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Cannot infer type: &#39;var&#39; on variable without initializer</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> title;
</span></span><span style="display:flex;"><span>    title <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;barista&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Cannot infer type: variable initializer is &#39;null&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">var</span> city <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="java-11">Java 11</h3>
<h4 id="strings-ä¸-files-çš„æ–°æ–¹æ³•">Strings ä¸ Files çš„æ–°æ–¹æ³•</h4>
<h5 id="strings">Strings</h5>
<ul>
<li>æ–¹æ³• <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#isBlank()">isBlank()</a>ã€‚æ²¡å¿…è¦åªä¸ºäº† StringUtils.isBlank(java.lang.String) å¼•å…¥ Apache Commons Lang3ã€‚</li>
<li>æ–¹æ³• <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#lines()">lines()</a>ã€‚è¿”å›ä»å­—ç¬¦ä¸²æå–çš„ç”±è¡Œç»„æˆçš„æµï¼Œè¡Œä¹‹é—´é€šè¿‡è¡Œç»ˆæ­¢ç¬¦åˆ†éš”ã€‚</li>
<li>æ–¹æ³• <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/String.html#strip()">trim()</a>ã€‚æ–¹æ³• trim() ä»…åˆ é™¤å­—ç¬¦ &lt;= U+0020ï¼ˆç©ºæ ¼ï¼‰ï¼›æ–¹æ³• strip() åˆ é™¤æ‰€æœ‰ Unicode ç©ºç™½å­—ç¬¦ï¼ˆä½†ä¸æ˜¯æ‰€æœ‰æ§åˆ¶å­—ç¬¦ï¼Œä¾‹å¦‚ \0ï¼‰ã€‚</li>
</ul>
<h5 id="files">Files</h5>
<p>æ›´å®¹æ˜“åœ°ä»æ–‡ä»¶è¯»å–å­—ç¬¦ä¸²å’Œå†™å…¥å­—ç¬¦ä¸²ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>Path path <span style="color:#f92672">=</span> Files.<span style="color:#a6e22e">writeString</span>(Files.<span style="color:#a6e22e">createTempFile</span>(tempDir, <span style="color:#e6db74">&#34;demo&#34;</span>, <span style="color:#e6db74">&#34;.txt&#34;</span>), <span style="color:#e6db74">&#34;Sample text&#34;</span>);
</span></span><span style="display:flex;"><span>String content <span style="color:#f92672">=</span> Files.<span style="color:#a6e22e">readString</span>(path);
</span></span><span style="display:flex;"><span>assertThat(content).<span style="color:#a6e22e">isEqualTo</span>(<span style="color:#e6db74">&#34;Sample text&#34;</span>);
</span></span></code></pre></div><h4 id="è¿è¡Œæºæ–‡ä»¶">è¿è¡Œæºæ–‡ä»¶</h4>
<p>å¯ä»¥ç›´æ¥è¿è¡Œæºæ–‡ä»¶ï¼Œè€Œæ— éœ€ç»è¿‡æ‰‹åŠ¨ç¼–è¯‘ï¼</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">MyScript</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">main</span>(String<span style="color:#f92672">[]</span> args) {
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(<span style="color:#e6db74">&#34;Hello, &#34;</span> <span style="color:#f92672">+</span> args<span style="color:#f92672">[</span>0<span style="color:#f92672">]</span> <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;!&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>å‘½ä»¤è¡Œå·¥å…· <a href="https://docs.oracle.com/en/java/javase/11/tools/java.html">java</a> å¸®ä½ å…ˆç¼–è¯‘åå¯åŠ¨ JVMã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>% java MyScript.java world
</span></span><span style="display:flex;"><span>Hello, world!
</span></span></code></pre></div><h4 id="lambda-å‚æ•°çš„ç±»å‹æ¨æ–­">Lambda å‚æ•°çš„ç±»å‹æ¨æ–­</h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>(<span style="color:#66d9ef">var</span> firstName, <span style="color:#66d9ef">var</span> lastName) <span style="color:#f92672">-&gt;</span> firstName <span style="color:#f92672">+</span> lastName
</span></span></code></pre></div><h3 id="java-12">Java 12</h3>
<p>ğŸ¥µ æ”¯æŒ Unicode 11 å’Œ Switch è¡¨è¾¾å¼çš„é¢„è§ˆã€‚</p>
<h3 id="java-13">Java 13</h3>
<h4 id="switch-expression-preview">Switch Expression (Preview)</h4>
<p>Switch è¡¨è¾¾å¼æ¯” Switch è¯­å¥æ›´ç´§å‡‘ã€ç®€æ´ã€æ˜“äºé˜…è¯»ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">switch</span> (day) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> MONDAY:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> FRIDAY:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> SUNDAY:
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(6);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> TUESDAY:
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(7);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> THURSDAY:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> SATURDAY:
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(8);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> WEDNESDAY:
</span></span><span style="display:flex;"><span>        System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(9);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">// since java 12/13</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">switch</span> (day) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> MONDAY, FRIDAY, SUNDAY <span style="color:#f92672">-&gt;</span> System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(6);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> TUESDAY                <span style="color:#f92672">-&gt;</span> System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(7);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> THURSDAY, SATURDAY     <span style="color:#f92672">-&gt;</span> System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(8);
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> WEDNESDAY              <span style="color:#f92672">-&gt;</span> System.<span style="color:#a6e22e">out</span>.<span style="color:#a6e22e">println</span>(9);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Switch è¡¨è¾¾å¼ä¸ Switch è¯­å¥ä¸€ä¸ªé‡è¦åŒºåˆ«åœ¨äºå‰è€…æœ‰<strong>è¿”å›å€¼</strong>ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> numLetters;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">switch</span> (day) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> MONDAY:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> FRIDAY:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> SUNDAY:
</span></span><span style="display:flex;"><span>        numLetters <span style="color:#f92672">=</span> 6;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> TUESDAY:
</span></span><span style="display:flex;"><span>        numLetters <span style="color:#f92672">=</span> 7;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> THURSDAY:
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> SATURDAY:
</span></span><span style="display:flex;"><span>        numLetters <span style="color:#f92672">=</span> 8;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> WEDNESDAY:
</span></span><span style="display:flex;"><span>        numLetters <span style="color:#f92672">=</span> 9;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">break</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">default</span>:
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> IllegalStateException(<span style="color:#e6db74">&#34;Wat: &#34;</span> <span style="color:#f92672">+</span> day);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#75715e">// since java 12/13</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">int</span> numLetters <span style="color:#f92672">=</span> <span style="color:#66d9ef">switch</span> (day) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> MONDAY, FRIDAY, SUNDAY <span style="color:#f92672">-&gt;</span> 6;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> TUESDAY                <span style="color:#f92672">-&gt;</span> 7;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> THURSDAY, SATURDAY     <span style="color:#f92672">-&gt;</span> 8;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> WEDNESDAY              <span style="color:#f92672">-&gt;</span> 9;
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><h4 id="text-blocks-preview">Text Blocks (Preview)</h4>
<p>åœ¨ Java æºæ–‡ä»¶é‡Œå†™å¤šè¡Œçš„ SQL ä»¤äººæ²®ä¸§ï¼Œæ˜¾å¼çš„æ¢è¡Œå’Œæ˜¾å¼çš„åŠ å·æ˜¯é˜…è¯»ä»£ç çš„éšœç¢ï¼Œä¸ç»å¤„ç†å¤åˆ¶åˆ°å…¶å®ƒåœ°æ–¹ä¹Ÿéš¾ä»¥è°ƒè¯•ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>String query <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;SELECT `EMP_ID`, `LAST_NAME` FROM `EMPLOYEE_TB`\n&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#34;WHERE `CITY` = &#39;INDIANAPOLIS&#39;\n&#34;</span> <span style="color:#f92672">+</span>
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#34;ORDER BY `EMP_ID`, `LAST_NAME`;\n&#34;</span>;
</span></span></code></pre></div><p>ç›´åˆ°ç»ˆäºå¯ä»¥ä½¿ç”¨â€œäºŒç»´â€çš„æ–‡æœ¬å—ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>String query <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">               SELECT `EMP_ID`, `LAST_NAME` FROM `EMPLOYEE_TB`
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">               WHERE `CITY` = &#39;INDIANAPOLIS&#39;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">               ORDER BY `EMP_ID`, `LAST_NAME`;
</span></span></span><span style="display:flex;"><span><span style="color:#e6db74">               &#34;&#34;&#34;</span>;
</span></span></code></pre></div><h3 id="java-14">Java 14</h3>
<h4 id="switch-expression">Switch Expression</h4>
<p><a href="https://openjdk.java.net/jeps/361">Switch è¡¨è¾¾å¼</a>æ­£å¼åŠ å…¥ Javaã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#66d9ef">switch</span> (day) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> MONDAY  <span style="color:#f92672">-&gt;</span> 0;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">case</span> TUESDAY <span style="color:#f92672">-&gt;</span> 1;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">default</span>      <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> k <span style="color:#f92672">=</span> day.<span style="color:#a6e22e">toString</span>().<span style="color:#a6e22e">length</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">int</span> result <span style="color:#f92672">=</span> f(k);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">yield</span> result;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>};
</span></span></code></pre></div><p>åœ¨ Switch è¡¨è¾¾å¼ä½“å†…æ˜¾å¼æˆ–éšå¼ä½¿ç”¨å…³é”®è¯ <code>yield</code> äº§ç”Ÿè¿”å›å€¼ã€‚</p>
<h4 id="records-preview">Records (Preview)</h4>
<p>ç¼–å†™æ™®é€šçš„ç±»æ—¶å¸¸ä¼´éšç€ç¼–å†™å¤§é‡çš„<strong>æ ·æ¿ä»£ç </strong>ï¼šæ„é€ å™¨ã€è®¿é—®å™¨ï¼ˆæ¯”å¦‚ Getters/Settersï¼‰ã€equals()ã€toString() ç­‰ç­‰ï¼Œé€šå¸¸æœ‰ä¸¤ç§æ–¹æ¡ˆå¯ä»¥ç¼“è§£ç¼–å†™æ ·æ¿ä»£ç çš„æ²®ä¸§ï¼š</p>
<ul>
<li>ç”Ÿæˆæºä»£ç ã€‚ä¾‹å¦‚ä½¿ç”¨ <a href="https://en.wikipedia.org/wiki/Integrated_development_environment">IDE</a> ç”Ÿæˆæ ·æ¿ä»£ç ã€‚</li>
<li>ç¼–è¯‘æ—¶ç”Ÿæˆä»£ç ã€‚ä¾‹å¦‚ä½¿ç”¨ <a href="https://projectlombok.org/">Project Lombok</a>ã€‚</li>
</ul>
<p>Records æ˜¯ä¸€ç§ç±»å‹å£°æ˜ï¼Œå®ƒæ˜¯ <code>class</code> çš„ä¸€ç§<strong>å—é™</strong>å½¢å¼ï¼Œä¸€æ¡ record å…·æœ‰åç§°å’ŒçŠ¶æ€æè¿°ï¼ˆstate descriptionï¼‰ï¼Œä¸¾ä¾‹æ¥è¯´ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">record</span> <span style="color:#a6e22e">Point</span>(<span style="color:#66d9ef">int</span> x, <span style="color:#66d9ef">int</span> y) {
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ä¸€æ¡ record è‡ªåŠ¨è·å¾—äº†è®¸å¤šæ ‡å‡†æˆå‘˜ï¼š<code>public final</code> çš„å®ä¾‹å­—æ®µã€æœ‰å‚æ„é€ å™¨ã€æ ‡å‡†çš„ equalsã€hashCodeã€toString æ–¹æ³•ï¼Œä¸Šæ–‡çš„ record Point è¿‘ä¹ç­‰ä»·äºï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">final</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Point</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> x;
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">int</span> y;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">public</span> <span style="color:#a6e22e">Point</span>(<span style="color:#66d9ef">int</span> x, <span style="color:#66d9ef">int</span> y) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">x</span> <span style="color:#f92672">=</span> x;
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">y</span> <span style="color:#f92672">=</span> y;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// Implementation of equals, hashCode, toString</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="pattern-matching-for-instanceof-preview">Pattern Matching for instanceof (Preview)</h4>
<p>ä½¿ç”¨ <code>instanceof</code> åˆ¤æ–­å˜é‡ä¹‹åä½¿ç”¨è¯¥å˜é‡éœ€å¼ºåˆ¶ç±»å‹è½¬æ¢ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (obj <span style="color:#66d9ef">instanceof</span> String) {
</span></span><span style="display:flex;"><span>    String s <span style="color:#f92672">=</span> (String) obj;
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// use s</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ç°åœ¨æœ‰äº†æ›´ç®€æ´çš„å†™æ³•ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (obj <span style="color:#66d9ef">instanceof</span> String s) {
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// can use s here</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h4 id="packaging-tool-incubator">Packaging Tool (Incubator)</h4>
<p>å‘½ä»¤è¡Œå·¥å…· <a href="https://docs.oracle.com/en/java/javase/14/docs/specs/man/jpackage.html">jpackage</a> å°† Java åº”ç”¨ç¨‹åºå’Œ Java è¿è¡Œæ—¶é•œåƒä½œä¸ºè¾“å…¥ï¼Œå¹¶äº§å‡ºåŒ…å«æ‰€æœ‰å¿…è¦ä¾èµ–çš„ Java åº”ç”¨ç¨‹åºé•œåƒã€‚å®ƒèƒ½å¤Ÿäº§ç”Ÿç‰¹å®šå¹³å°çš„<strong>åŸç”Ÿ</strong>åŒ…ï¼Œä¾‹å¦‚ Windows ä¸Šçš„ <code>exe</code> å’Œ <code>msi</code>ã€MacOS ä¸Šçš„ <code>dmg</code> å’Œ <code>pkg</code>ã€Linux ä¸Šçš„ <code>deb</code> å’Œ <code>rpm</code>ï¼Œç„¶è€Œæ¯ç§æ ¼å¼å¿…é¡»åœ¨å…¶è¿è¡Œçš„å¹³å°ä¸Šæ„å»ºã€‚</p>
<h4 id="remove-cms">Remove CMS</h4>
<p>ç§»é™¤å¹¶å‘æ ‡è®°æ¸…é™¤ (CMS) åƒåœ¾æ”¶é›†å™¨ã€‚</p>
<h3 id="java-15">Java 15</h3>
<h4 id="zgc">ZGC</h4>
<p>å¯æ‰©å±•çš„ä½å»¶è¿Ÿåƒåœ¾æ”¶é›†å™¨ <a href="https://openjdk.java.net/jeps/377">ZGC</a>ï¼Œç”Ÿäº§å°±ç»ªã€‚</p>
<h4 id="text-blocks">Text Blocks</h4>
<p><a href="https://openjdk.java.net/jeps/378">Text Blocks</a> ç”Ÿäº§å°±ç»ªã€‚</p>
<h4 id="sealed-classes-preview">Sealed Classes (Preview)</h4>
<p>ä¸€ä¸ª <code>sealed class</code> æˆ–è€… <code>sealed interface</code> è¦æ±‚æŒ‡å®š<strong>å…è®¸</strong>å“ªäº›ç±»ç»§æ‰¿æˆ–è€…å®ç°ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#f92672">package</span> com.example.geometry;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">public</span> <span style="color:#66d9ef">abstract</span> <span style="color:#66d9ef">sealed</span> <span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Shape</span> permits Circle, Rectangle, Square {
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>å¦‚ä¸Šæ‰€ç¤ºï¼Œç±» Shape åªèƒ½è¢« Circleã€Rectangleã€Square ç»§æ‰¿ï¼Œä¸”æ‰€æœ‰ sealed class çš„å­ç±»å¿…é¡»æ˜¯ finalã€sealed æˆ–é sealed çš„ã€‚</p>
<h3 id="java-16">Java 16</h3>
<h4 id="pattern-matching-for-instanceof">Pattern Matching for instanceof</h4>
<p><a href="https://openjdk.java.net/jeps/394">Pattern Matching for instanceof</a> æ­£å¼åŠ å…¥ Javaã€‚</p>
<h4 id="unix-domain-socket-channels">Unix-Domain Socket Channels</h4>
<p><a href="https://en.wikipedia.org/wiki/Unix_domain_socket">Unix-domain sockets</a> ç”¨äºåŒä¸€ä¸»æœºä¸Šçš„è¿›ç¨‹é—´çš„é€šä¿¡ï¼Œå®ƒä»¬å¤§å¤šæ•°æ–¹é¢ç±»ä¼¼äº TCP/IP Socketsï¼Œé™¤äº†é€šè¿‡æ“ä½œç³»ç»Ÿæ–‡ä»¶è·¯å¾„åè€Œä¸æ˜¯é€šè¿‡ IP åœ°å€å’Œç«¯å£æ¥<strong>å¯»å€</strong>ã€‚</p>
<h3 id="java-17">Java 17</h3>
<h4 id="pattern-matching-for-switch-preview">Pattern Matching for switch (Preview)</h4>
<p>è™½ç„¶ <code>instanceof</code> å·²ç»æœ‰æ›´ç®€æ´çš„æ¨¡å¼åŒ¹é…ï¼Œä½†æ˜¯ç»“åˆè¿‡å¤šçš„ if&hellip;else if&hellip;else ä¸æ¯” <code>switch</code> è¡¨è¾¾å¼æ›´ç›´è§‚ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#66d9ef">static</span> String <span style="color:#a6e22e">formatterPatternSwitch</span>(Object o) {
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">switch</span> (o) {
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> Integer i <span style="color:#f92672">-&gt;</span> String.<span style="color:#a6e22e">format</span>(<span style="color:#e6db74">&#34;int %d&#34;</span>, i);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> Long l    <span style="color:#f92672">-&gt;</span> String.<span style="color:#a6e22e">format</span>(<span style="color:#e6db74">&#34;long %d&#34;</span>, l);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> Double d  <span style="color:#f92672">-&gt;</span> String.<span style="color:#a6e22e">format</span>(<span style="color:#e6db74">&#34;double %f&#34;</span>, d);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">case</span> String s  <span style="color:#f92672">-&gt;</span> String.<span style="color:#a6e22e">format</span>(<span style="color:#e6db74">&#34;String %s&#34;</span>, s);
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">default</span>        <span style="color:#f92672">-&gt;</span> o.<span style="color:#a6e22e">toString</span>();
</span></span><span style="display:flex;"><span>    };
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ç°åœ¨æˆ‘ä»¬å¯ä»¥æŠŠ <code>Object</code> ç±»å‹çš„å˜é‡ä¼ é€’ç»™ <code>switch</code>ï¼Œä¸”å·²åŒ¹é… <code>case</code> çš„<strong>æ¨¡å¼</strong>è¢«è‡ªåŠ¨èµ‹å€¼ã€‚</p>
<h4 id="sealed-classes">Sealed Classes</h4>
<p><a href="https://openjdk.java.net/jeps/409">Sealed Classes</a> æ­£å¼åŠ å…¥ Javaã€‚</p>
<h4 id="foreign-function--memory-api-incubator">Foreign Function &amp; Memory API (Incubator)</h4>
<p>Foreign Function &amp; Memory API æ˜¯ JNI çš„æ›¿ä»£å“ï¼ŒJava ç¨‹åºå¯ä»¥é€šè¿‡è¯¥ API ä¸ Java è¿è¡Œæ—¶ä¹‹å¤–çš„ä»£ç å’Œæ•°æ®è¿›è¡Œäº¤äº’ã€‚é€šè¿‡æœ‰æ•ˆè°ƒç”¨ Foreign Functionï¼ˆå³ JVM ä¹‹å¤–çš„ä»£ç ï¼‰å’Œå®‰å…¨åœ°è®¿é—®å¤–éƒ¨å†…å­˜ï¼ˆå³ä¸å— JVM ç®¡ç†çš„å†…å­˜ï¼‰ä½¿ Java ç¨‹åºèƒ½å¤Ÿè°ƒç”¨åŸç”Ÿåº“ï¼ˆnative librariesï¼‰å¹¶å¤„ç†åŸç”Ÿæ•°æ®ï¼ˆprocess native dataï¼‰ï¼Œä¸”æ²¡æœ‰ JNI çš„<strong>è„†å¼±æ€§</strong>å’Œ<strong>å±é™©æ€§</strong>ã€‚</p>
<h2 id="é‡åˆ°çš„å‘">é‡åˆ°çš„å‘</h2>
<p><em><strong><a href="https://github.com/cglib/cglib/issues/191">CGLIB æœªæ”¯æŒ Java 17</a>ã€‚</strong></em></p>
<p>è‡³å°‘æœ‰ä¸¤ç§è§£å†³æ–¹æ¡ˆï¼š</p>
<ul>
<li>ä½¿ç”¨ <a href="https://github.com/raphw/byte-buddy">Byte Buddy</a> ä»£æ›¿ cglibï¼Œä½† API å¤§ç›¸å¾„åº­ã€‚</li>
<li>ä½¿ç”¨ org.springframework.cglib ä»£æ›¿ net.sf.cglibï¼Œä½†ä¾èµ– org.springframework:spring-core:5.3.xã€‚</li>
</ul>
<blockquote>
<p>æœ¬æ–‡é¦–å‘äº https://h2cone.github.io/</p>
</blockquote>
<h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2>
<ul>
<li><a href="https://www.onjava8.com/">On Java</a></li>
<li><a href="https://www.marcobehler.com/guides/a-guide-to-java-versions-and-features">Java Versions and Features</a></li>
<li><a href="https://www.baeldung.com/java-lambda-effectively-final-local-variables">Why Do Local Variables Used in Lambdas Have to Be Final or Effectively Final?</a></li>
<li><a href="https://openjdk.java.net/jeps/0">JEP 0: JEP Index</a></li>
<li><a href="https://mydeveloperplanet.com/2021/09/28/whats-new-between-java-11-and-java-17/">Whatâ€™s New Between Java 11 and Java 17?</a></li>
<li><a href="https://en.wikipedia.org/wiki/Java_version_history">Java version history</a></li>
</ul>

		</section>

		<div class="post-tags">
			
			
			<nav class="nav tags">
				<ul class="tags">
					
					<li><a href="/tags/java">java</a></li>
					
				</ul>
			</nav>
			
			
		</div>
		</article>
</main>
<footer>
  <div style="display:flex"><a class="soc" href="https://github.com/h2cone" rel="me" title="GitHub"><i data-feather="github"></i></a>
    <a class="border"></a></div>
  <div class="footer-info">
    2024  Â© Huangh&#39;s blog |  <a
      href="https://github.com/athul/archie">Archie Theme</a> | Built with <a href="https://gohugo.io">Hugo</a>
  </div>
</footer>


  


<script>
  feather.replace()
</script></div>
    </body>
</html>
